(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21df34de"],{"51db":function(t,a,s){},"81b1":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"wrap"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),s("ul",{staticClass:"categoryList"},[s("li",{on:{click:t.getProducts}},[s("router-link",{attrs:{to:"/products/all-Products"}},[t._v("所有產品")])],1),s("li",{on:{click:t.getProducts}},[s("router-link",{attrs:{to:"/products/電吉他|貝斯"}},[t._v("電吉他/貝斯")])],1),s("li",{on:{click:t.getProducts}},[s("router-link",{attrs:{to:"/products/木吉他|烏克麗麗"}},[t._v("木吉他/烏克麗麗")])],1),s("li",{on:{click:t.getProducts}},[s("router-link",{attrs:{to:"/products/周邊商品"}},[t._v("周邊商品")])],1),s("li",{staticClass:"price-sort"},[t._v("價格排序 "),s("ul",[s("li",[s("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.sortData="lowToHigh"}}},[t._v("由低到高")])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.sortData="highToLow"}}},[t._v("由高到低")])])])])]),s("div",{staticClass:"container mt-md-5 mt-3 mb-7"},[s("div",{staticClass:"row"},[s("div",{staticClass:"products col-md-12"},[s("div",{staticClass:"row"},t._l(t.showProducts,(function(a){return s("div",{key:a.id,staticClass:"productList col-md-4"},[s("div",{staticClass:"card border-4 mb-4"},[s("div",{staticClass:"card-img rounded-0 position-relative",style:"background-image: url("+a.imageUrl[0]+");"},[s("div",{staticClass:"favor",on:{click:function(s){return t.addToFavor(a.id)}}},[-1===t.myFavor.indexOf(a.id)?s("i",{staticClass:"fas fa-heart text-light"}):s("i",{staticClass:"fas fa-heart text-danger"})])]),s("div",{staticClass:"card-body p-0"},[s("h4",{staticClass:"mb-0 mt-3"},[s("a",{attrs:{href:"./detail.html"}},[t._v(t._s(a.title))])]),s("div",{staticClass:"price"},[s("p",{staticClass:"card-text mb-0",staticStyle:{"font-size":"20px"}},[t._v("特價:"+t._s(t._f("thousands")(a.price)))])]),s("div",{staticClass:"text-muted mb-4"},[s("del",[t._v("原價:"+t._s(t._f("thousands")(a.origin_price)))])])]),s("div",{staticClass:"card-footer d-flex"},[s("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:"/product/"+a.id}},[t._v(" 詳細資訊 ")]),s("button",{staticClass:"btn btn-outline-primary btn-sm ml-auto\n                d-flex align-items-center",attrs:{disabled:t.status.loadingItem===a.id},on:{click:function(s){return s.preventDefault(),t.addToCart(a.id)}}},[t._v(" 加入購物車 "),t.status.loadingItem===a.id?s("i",{staticClass:"ml-2 spinner-grow spinner-grow-sm d-md-none d-lg-block",staticStyle:{width:"12px",height:"12px"}}):t._e()])],1)])])})),0)])])]),s("pagination",{attrs:{pages:t.pagination},on:{update:t.getProducts}}),t._m(1)],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"Title"},[s("h2",[t._v("產品列表")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"footer py-5"},[s("div",{staticClass:"container"},[s("div",{staticClass:"d-flex align-items-center justify-content-between text-white mb-md-7 mb-4"},[s("a",{staticClass:"title",attrs:{href:"./index.html"}},[t._v("Master Gutair")]),s("ul",{staticClass:"d-flex list-unstyled mb-0 h4"},[s("li",[s("a",{staticClass:"text-white mx-3",attrs:{href:"#"}},[s("i",{staticClass:"fab fa-facebook"})])]),s("li",[s("a",{staticClass:"text-white mx-3",attrs:{href:"#"}},[s("i",{staticClass:"fab fa-instagram"})])]),s("li",[s("a",{staticClass:"text-white ml-3",attrs:{href:"#"}},[s("i",{staticClass:"fab fa-line"})])])])]),s("div",{staticClass:"d-flex flex-column flex-md-row justify-content-between align-items-md-end align-items-start text-white"},[s("div",{staticClass:"mb-md-0 mb-1"},[s("p",{staticClass:"mb-0"},[t._v("02-3456-7890")]),s("p",{staticClass:"mb-0"},[t._v("service@mail.com")])]),s("p",{staticClass:"mb-0"},[t._v("© 2020 LOGO All Rights Reserved.")])])])])}],r=(s("99af"),s("4160"),s("c975"),s("a434"),s("b0c0"),s("159b"),function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"d-flex justify-content-center"},[s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link  {disable: page.current_page === 1}",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.page.current_page-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a){return s("li",{key:a,staticClass:"page-item active"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.updatePage(a)}}},[t._v(t._s(a))])])})),s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.page.current_page+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])}),n=[],c={props:["pages"],data:function(){return{pagination:{}}},methods:{updatePage:function(t){this.$emit("update",t)}}},o=c,l=s("2877"),u=Object(l["a"])(o,r,n,!1,null,null,null),d=u.exports,p={components:{pagination:d},data:function(){return{products:[],showProducts:[],category:"",pagination:{},sortData:"",isLoading:!1,status:{loadingItem:""},myFavor:JSON.parse(localStorage.getItem("favorItem"))||[]}},created:function(){this.getProducts(),this.router=this.$router.history.current.name},methods:{getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var s=this.$route.params.category,i="".concat("https://course-ec-api.hexschool.io/api/").concat("07efa40d-8941-4249-aabc-164add9a7575","/ec/products?pages=").concat(a);this.axios.get(i).then((function(a){t.showProducts=[],t.products=a.data.data,t.pagination=a.data.meta.pagination,console.log(a),t.products.forEach((function(a){s===a.category?(t.showProducts.push(a),t.category=s):"all-Products"===s&&(t.showProducts=t.products,t.category="all Products"),t.category=s})),t.isLoading=!1}))},addToCart:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.status.loadingItem=t;var i="".concat("https://course-ec-api.hexschool.io/api/").concat("07efa40d-8941-4249-aabc-164add9a7575","/ec/shopping");this.status.loadingItem=t,this.isLoading=!0,this.axios.post(i,{product:t,quantity:s}).then((function(t){a.status.loadingItem="",a.isLoading=!1,a.$bus.$emit("get-cart"),a.$bus.$emit("message:push","商品成功加入購物車!","success")})).catch((function(t){a.status.loadingItem="",a.isLoading=!1,a.$bus.$emit("message:push","加入失敗!".concat(t.response.data.errors),"danger")}))},addToFavor:function(t,a){var s=this.myFavor.indexOf(t);-1===s?(this.myFavor.push(t),this.$bus.$emit("message:push","商品成功加入收藏!","success")):(this.myFavor.splice(s,1),this.$bus.$emit("message:push","取消收藏","danger"),this.$bus.$emit("get-cart")),localStorage.setItem("favorItem",JSON.stringify(this.myFavor))}},computed:{filterPrice:function(){var t=this,a=[];return this.showProducts.forEach((function(s,i){a.push(t.showProducts[i])})),a.sort((function(a,s){return"lowToHigh"===t.sortData?a.price-s.price:s.price-a.price})),a}}},f=p,g=(s("b919"),Object(l["a"])(f,i,e,!1,null,"78b82c3f",null));a["default"]=g.exports},b0c0:function(t,a,s){var i=s("83ab"),e=s("9bf2").f,r=Function.prototype,n=r.toString,c=/^\s*function ([^ (]*)/,o="name";i&&!(o in r)&&e(r,o,{configurable:!0,get:function(){try{return n.call(this).match(c)[1]}catch(t){return""}}})},b919:function(t,a,s){"use strict";var i=s("51db"),e=s.n(i);e.a}}]);
//# sourceMappingURL=chunk-21df34de.1681aaaf.js.map