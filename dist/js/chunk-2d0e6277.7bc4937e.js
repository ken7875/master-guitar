(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6277"],{9813:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("h2",{staticClass:"title font-weight-bold mt-12 mb-6 pb-lg-6 pb-md-4"},[t._v("結帳頁面")]),a("div",{staticClass:"row flex-row-reverse justify-content-center pb-5"},[a("div",{staticClass:"checklist col-lg-5 col-md-6"},[a("div",{staticClass:"border p-4 mb-4"},[t._l(t.getCartsDone,(function(e){return a("div",{key:e.product.id,staticClass:"d-flex content mb-4 align-items-center"},[a("img",{staticClass:"mr-3",attrs:{src:""+e.product.imageUrl[0]}}),a("div",{staticClass:"mt-2 w-100"},[a("div",{staticClass:"d-flex justify-content-between"},[a("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(e.product.title))]),a("p",{staticClass:"mb-0"},[t._v(t._s(e.product.price))])]),a("p",{staticClass:"mb-0 font-weight-bold"},[t._v("X"+t._s(e.quantity))])])])})),a("div",{staticClass:"mt-4 border-top border-bottom text-muted"},[a("div",{staticClass:"d-flex mt-4"},[a("p",{staticClass:"border-0 font-weight-normal mr-8"},[t._v("$價格")]),a("p",{staticClass:"border-0  font-weight-normal"},[t._v("NT$"+t._s(t.originTotal))])]),t.originTotal>=1e4?a("div",{staticClass:"d-flex",attrs:{disabled:""}},[a("p",{staticClass:"border-0 font-weight-normal mr-8"},[t._v("$運費")]),a("p",{staticClass:"border-0  font-weight-normal"},[t._v("NT$0")])]):t._e(),t.originTotal<1e4?a("div",{staticClass:"d-flex",attrs:{disabled:""}},[a("p",{staticClass:"border-0 font-weight-normal mr-8"},[t._v("$運費")]),a("p",{staticClass:"border-0 font-weight-normal"},[t._v("NT$200")])]):t._e(),a("div",{staticClass:"discount d-flex"},[a("p",{staticClass:"border-0 font-weight-normal mr-8"},[t._v("$折扣")]),a("p",{staticClass:"border-0 font-weight-normal"},[t._v(t._s(t.originTotal))])]),a("div",{staticClass:"input-group mb-3 row no-gutters"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control px-3 col-lg-5 col-md-6 col-5",attrs:{type:"text",placeholder:"請輸入優惠碼",value:"輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-wood",attrs:{type:"submit"},on:{click:t.addCoupon}},[t._v("套用")])])])]),a("div",{staticClass:"d-flex justify-content-between mt-4"},[a("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("Total")]),t.coupon.enabled?a("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("NT$"+t._s(t._f("thousands")(parseInt(t.totalPrice))))]):a("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("NT$"+t._s(t._f("thousands")(parseInt(t.payTotal))))])])],2)]),a("div",{staticClass:"form-group col-lg-7 col-md-6"},[t._m(0),a("validation-observer",{staticClass:"col-md-6",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes,r=e.passed;return[a("label",{attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"},{name:"model",rawName:"v-model.trim",value:t.form.name,expression:"form.name",modifiers:{trim:!0}}],staticClass:"form-control",class:o,attrs:{id:"name",type:"name",name:"姓名"},domProps:{value:t.form.name,value:t.form.name},on:{input:[function(e){e.target.composing||t.$set(t.form,"name",e.target.value.trim())},function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}],blur:function(e){return t.$forceUpdate()}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e(),r?a("span",{staticClass:"valid-feedback"},[t._v("名字 輸入正確")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes,r=e.passed;return[a("label",{attrs:{for:"email"}},[t._v("郵件")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"},{name:"model",rawName:"v-model.trim",value:t.form.email,expression:"form.email",modifiers:{trim:!0}}],staticClass:"form-control",class:o,attrs:{id:"email",type:"email",name:"郵件"},domProps:{value:t.form.email,value:t.form.email},on:{input:[function(e){e.target.composing||t.$set(t.form,"email",e.target.value.trim())},function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}],blur:function(e){return t.$forceUpdate()}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e(),r?a("span",{staticClass:"valid-feedback"},[t._v("郵件 輸入正確")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes,r=e.passed;return[a("label",{attrs:{for:"tel"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"},{name:"model",rawName:"v-model.trim",value:t.form.tel,expression:"form.tel",modifiers:{trim:!0}}],staticClass:"form-control",class:o,attrs:{id:"tel",type:"tel",name:"電話"},domProps:{value:t.form.tel,value:t.form.tel},on:{input:[function(e){e.target.composing||t.$set(t.form,"tel",e.target.value.trim())},function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}],blur:function(e){return t.$forceUpdate()}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e(),r?a("span",{staticClass:"valid-feedback"},[t._v("電話 輸入正確")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes,r=e.passed;return[a("label",{attrs:{for:"address"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control",class:o,attrs:{id:"address",type:"text"},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e(),r?a("span",{staticClass:"valid-feedback"},[t._v("地址 輸入正確")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes,r=e.passed;return[a("label",{attrs:{for:"payment"}},[t._v("付款方式")]),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.payment,expression:"form.payment",modifiers:{trim:!0}}],staticClass:"form-control",class:o,attrs:{required:"",id:"payment",name:"付款方式"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇付款方式")]),a("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),a("option",{attrs:{value:"ATM"}},[t._v("ATM")]),a("option",{attrs:{value:"CVS"}},[t._v("CVS")]),a("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),a("option",{attrs:{value:"Credit"}},[t._v("Credit")]),a("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),a("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),s[0]?a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]):t._e(),r?a("span",{staticClass:"valid-feedback"},[t._v("已選擇付款方式")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"message"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"message",cols:"30",rows:"3"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s},on:{click:function(e){t.page=1}}},[t._v("下一步")])])]}}])})],1)])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-title h4"},[a("p",[t._v("訂購人資料")])])}],r=(a("99af"),a("5530")),i=a("2f62"),n={data:function(){return{form:{name:"",email:"",tel:"",address:"",payment:"",message:""},coupon:{},coupon_code:""}},created:function(){this.getCart()},methods:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["getCart"])),{},{createOrder:function(){var t=this;this.$store.state.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("07efa40d-8941-4249-aabc-164add9a7575","/ec/orders"),a=Object(r["a"])({},this.form);this.coupon.enabled?a.coupon=this.coupon.code:a.coupon="",this.axios.post(e,a).then((function(e){t.$store.state.isLoading=!1,t.getCart(),t.$bus.$emit("get-cart"),t.$router.push("/confirm/".concat(e.data.data.id))}))},addCoupon:function(){var t=this;this.$store.state.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("07efa40d-8941-4249-aabc-164add9a7575","/ec/coupon/search");this.axios.post(e,{code:this.coupon_code}).then((function(e){t.$store.state.isLoading=!1,t.coupon=e.data.data})).catch((function(e){t.$store.state.isLoading=!1,t.$bus.$emit("message:push","加入失敗!".concat(e.response.data.errors),"danger"),t.coupon_code=""}))}}),computed:Object(r["a"])(Object(r["a"])({},Object(i["c"])(["getCartsDone","payTotal","originTotal","isLoading"])),{},{totalPrice:function(){return this.payTotal*(this.coupon.percent/100)}})},l=n,c=a("2877"),d=Object(c["a"])(l,s,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0e6277.7bc4937e.js.map